module.exports = { contents: "var _p = {};\nvar _v = function(exports){\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    name: 'modal-move-page',\n    props: ['currentPath'],\n    data: function () {\n        return {\n            movePath: '',\n            isLoading: false,\n            isInvalid: false\n        };\n    },\n    computed: {\n        isShown: function () {\n            if (this.$store.state.modalMovePage.shown) {\n                this.movePath = this.currentPath;\n                this.makeSelection();\n            }\n            return this.$store.state.modalMovePage.shown;\n        }\n    },\n    methods: {\n        makeSelection: function () {\n            var self = this;\n            self._.delay(function () {\n                var startPos = (self._.includes(self.currentPath, '/')) ? self._.lastIndexOf(self.movePath, '/') + 1 : 0;\n                self.$helpers.form.setInputSelection(self.$refs.movePageInput, startPos, self.movePath.length);\n            }, 100);\n        },\n        cancel: function () {\n            this.$store.dispatch('modalMovePage/close');\n        },\n        move: function () {\n            var _this = this;\n            this.isInvalid = false;\n            var newDocPath = this.$helpers.pages.makeSafePath(this.movePath);\n            if (this._.isEmpty(newDocPath) || newDocPath === this.currentPath || newDocPath === 'home') {\n                this.isInvalid = true;\n            }\n            else {\n                this.isLoading = true;\n                this.$http.put(window.location.href, {\n                    move: newDocPath\n                }).then(function (resp) {\n                    return resp.json();\n                }).then(function (resp) {\n                    if (resp.ok) {\n                        window.location.assign('/' + newDocPath);\n                    }\n                    else {\n                        _this.loading = false;\n                        self.$store.dispatch('alert', {\n                            style: 'red',\n                            icon: 'ui-2_square-remove-09',\n                            msg: resp.msg\n                        });\n                    }\n                }).catch(function (err) {\n                    _this.loading = false;\n                    self.$store.dispatch('alert', {\n                        style: 'red',\n                        icon: 'ui-2_square-remove-09',\n                        msg: 'Error: ' + err.body.msg\n                    });\n                });\n            }\n        }\n    }\n};\n\n};\n_p.render = function render () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"duration\":400}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShown),expression:\"isShown\"}],staticClass:\"modal\"},[_c('transition',{attrs:{\"name\":\"modal-background\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShown),expression:\"isShown\"}],staticClass:\"modal-background\"})]),_c('div',{staticClass:\"modal-container\"},[_c('transition',{attrs:{\"name\":\"modal-content\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShown),expression:\"isShown\"}],staticClass:\"modal-content\"},[_c('header',{staticClass:\"is-indigo\"},[_vm._v(_vm._s(_vm.$t('modal.movepagetitle')))]),_c('section',[_c('label',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.$t('modal.movepagepath')))]),_c('p',{staticClass:\"control is-fullwidth\",class:{ \"is-loading\": _vm.isLoading }},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.movePath),expression:\"movePath\"}],ref:\"movePageInput\",staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.$t(\"modal.movepageplaceholder\")},domProps:{\"value\":(_vm.movePath)},on:{\"keyup\":[function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13)){ return null; }_vm.move($event)},function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27)){ return null; }_vm.cancel($event)}],\"input\":function($event){if($event.target.composing){ return; }_vm.movePath=$event.target.value}}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isInvalid),expression:\"isInvalid\"}],staticClass:\"help is-red\"},[_vm._v(_vm._s(_vm.$t('modal.movepageinvalid')))]),_c('span',{staticClass:\"note\"},[_vm._v(_vm._s(_vm.$t('modal.movepagewarning')))])])]),_c('footer',[_c('a',{staticClass:\"button is-grey is-outlined\",on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.$t('modal.discard')))]),_c('a',{staticClass:\"button is-indigo\",on:{\"click\":_vm.move}},[_vm._v(_vm._s(_vm.$t('modal.move')))])])])])],1)],1)])}\n_p.staticRenderFns = [  ];\nvar _e = {}; _v(_e); Object.assign(_e.default.options||_e.default, _p)\nmodule.exports = _e\n    ",
dependencies: [],
sourceMap: {},
headerContent: undefined,
mtime: 1548128996000,
devLibsRequired : undefined
};